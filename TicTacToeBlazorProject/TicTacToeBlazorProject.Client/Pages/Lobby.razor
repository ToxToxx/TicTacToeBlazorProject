@page "/"
@using TicTacToeBlazorProject.Shared
@inject NavigationManager NavigationManager
@rendermode @(new InteractiveWebAssemblyRenderMode(false))

<h3>Lobby</h3>

@code {
    private HubConnection? _hubConnection;

    protected override async Task OnInitializedAsync()
    {
        _hubConnection = new HubConnectionBuilder()
            .WithUrl(NavigationManager.ToAbsoluteUri("/gamehub"))
            .Build();

        _hubConnection.On<List<GameRoom>>("Rooms", (roomsList) =>
        {
            Console.WriteLine($"Rooms. Count = {roomsList.Count}");

        });

        await _hubConnection.StartAsync();
    }
}
